<%= page_title 'hub.redirect_to_idp_warning.title' %>
<% content_for :feedback_source, 'REDIRECT_TO_IDP_WARNING_PAGE' %>

<div class="grid-row js-continue-to-idp" data-location="<%= url_for(controller: 'redirect_to_idp_warning', action: 'continue_ajax', locale: I18n.locale)  %>">
  <div class="column-two-thirds">
    <h1 class="heading-large"><%= t 'hub.redirect_to_idp_question.heading', display_name: @idp.display_name %></h1>
    <%= @idp.interstitial_question.html_safe %>

    <%= form_for @form, url: redirect_to_idp_question_submit_path, html: {id: 'interstitial-question-form', class: 'js-validate  js-idp-form', novalidate: 'novalidate'} do |f| %>

        <% if flash[:errors] %>
            <div id="validation-error-message-no-js" class="validation-message form-group">
              <p class="error"><%= flash[:errors] %></p>
            </div>
        <% end %>

        <%= content_tag :div, class: flash[:errors] ? "form-group error" : "form-group" do %>
            <fieldset>
              <%= f.custom_radio_button :extra_info, true, t('hub.redirect_to_idp_question.answer_yes'), {required: true, data: { msg: t('hub.redirect_to_idp_question.validation_message')}} %>
              <%= f.custom_radio_button :extra_info, false, t('hub.redirect_to_idp_question.answer_no'), {required: true, data: { msg: t('hub.redirect_to_idp_question.validation_message')}} %>
            </fieldset>
        <% end %>

        <div id="validation-error-message-js"></div>

        <div id="interstitial_question_details" class="hidden panel">
          <%= t 'hub.redirect_to_idp_question.warning_html', display_name: @idp.display_name, choose_another_company_link: link_to(t('hub.redirect_to_idp_question.choose_another_certified_company_link'), choose_a_certified_company_path)%>
        </div>

        <div class="panel panel-border-wide">
          <%= t 'hub.redirect_to_idp_question.identity_documents' %>
        </div>

        <div class="form-group-tight">
            <%= button_tag t('hub.redirect_to_idp_warning.continue_to_idp', display_name: @idp.display_name),
                           class: 'button',
                           id: 'continue-to-idp-button',
                           type: 'submit'
            %>
        </div>
    <% end %>
    <div>
      <%= t 'hub.redirect_to_idp_question.or_html', choose_another_company_link: link_to(t('hub.redirect_to_idp_question.choose_another_certified_company_link'), choose_a_certified_company_path)%>
    </div>
  </div>
  <%= render partial: 'shared/continue_to_idp_form' %>
</div>